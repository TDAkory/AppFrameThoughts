# Proxy

为什么要使用数据库Proxy

一句话概括：有了分布式，引入了数据分片，结合主从架构，就有了Proxy存在的意义：让用户尽可能不感知到Replication和Sharding，屏蔽各种中间态的处理逻辑以及数据迁移带来的暂态问题。

需要权衡的方面：

* Client带宽 VS Proxy带宽
* 运维成本，统一ACL逻辑处理，负载均衡功能
* 多一次RPC转发的CPU开销（如果有协议转换，开销可能更大）以及延迟增加
* 独立部署 VS 逻辑组件
* 部署在靠近Client侧 VS 部署在靠近Server侧 VS 中间
* etc

需要考虑的功能点：

* 性能上：线程模型、Cache、连接管理、Acceptor模式、连接数限流、断链检测、链接是否共享、数据零拷贝
* 控制层面：元数据、Server心跳、服务注册、路由策略
* 服务治理：客户端重试逻辑、限流、熔断
* 可观测性

